<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ransom Note Generator</title>
    <meta name="description" content="Create expressive typography with mixed fonts and animations">
    
    <!-- P5.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    
    <!-- Our custom styles -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Preload key fonts for better performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <div class="app-container">
        <div class="controls-panel">
            <header>
                <h1>Ransom Note Generator</h1>
                <p>Create expressive typography with mixed fonts and effects</p>
            </header>
            
            <!-- TEXT INPUT SECTION -->
            <div class="input-section">
                <label for="textInput">Your Message</label>
                <textarea 
                    id="textInput" 
                    placeholder="Enter your message..." 
                    maxlength="100"
                    autocomplete="off"
                    spellcheck="false"
                ></textarea>
                <button id="generateBtn" type="button">Generate Ransom Note</button>
            </div>
            
            <!-- TEXT EFFECTS SECTION -->
            <div class="collapsible-section">
                <div class="section-header" id="effectsHeader">
                    <h3>Text Effects</h3>
                    <svg class="chevron" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true">
                        <path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                
                <div class="section-content" id="effectsContent">
                    <div class="control-group">
                        <label for="blur">
                            Blur 
                            <span class="range-value" id="blurValue">0px</span>
                        </label>
                        <input type="range" id="blur" min="0" max="10" value="0" step="0.5" aria-describedby="blurValue">
                    </div>
                    
                    <div class="control-group">
                        <label for="spacing">
                            Spacing 
                            <span class="range-value" id="spacingValue">20px</span>
                        </label>
                        <input type="range" id="spacing" min="-50" max="100" value="20" step="2" aria-describedby="spacingValue">
                    </div>
                    
                    <div class="control-group">
                        <label for="stretch">
                            Stretch 
                            <span class="range-value" id="stretchValue">100%</span>
                        </label>
                        <input type="range" id="stretch" min="50" max="300" value="100" step="5" aria-describedby="stretchValue">
                    </div>
                    
                    <div class="control-group">
                        <label for="sizeVariation">
                            Size Variation 
                            <span class="range-value" id="sizeVariationValue">24px</span>
                        </label>
                        <input type="range" id="sizeVariation" min="0" max="40" value="24" step="2" aria-describedby="sizeVariationValue">
                    </div>
                    
                    <div class="control-group">
                        <label for="strokeWeight">
                            Stroke Weight 
                            <span class="range-value" id="strokeWeightValue">0px</span>
                        </label>
                        <input type="range" id="strokeWeight" min="0" max="8" value="0" step="0.5" aria-describedby="strokeWeightValue">
                    </div>
                    
                    <div class="control-group">
                        <label for="distortion">
                            Distortion 
                            <span class="range-value" id="distortionValue">0°</span>
                        </label>
                        <input type="range" id="distortion" min="0" max="30" value="0" step="1" aria-describedby="distortionValue">
                    </div>
                </div>
            </div>
            
            <!-- ANIMATIONS SECTION -->
            <div class="collapsible-section">
                <div class="section-header" id="animationsHeader">
                    <h3>Animations</h3>
                    <svg class="chevron" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true">
                        <path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                
                <div class="section-content" id="animationsContent">
                    <div class="control-group">
                        <label for="animationType">Animation Type</label>
                        <select id="animationType" class="animation-select">
                            <option value="none">None</option>
                            <option value="bounce">Bounce</option>
                            <option value="chaos">Chaos</option>
                            <option value="float">Float</option>
                            <option value="pulse">Pulse</option>
                            <option value="typewriter">Typewriter</option>
                            <option value="shuffle">Shuffle</option>
                        </select>
                    </div>
                    
                    <div class="control-group">
                        <label for="animationSpeed">
                            Speed 
                            <span class="range-value" id="animationSpeedValue">1x</span>
                        </label>
                        <input type="range" id="animationSpeed" min="0.1" max="3" value="1" step="0.1" aria-describedby="animationSpeedValue">
                    </div>
                    
                    <div class="animation-controls">
                        <button id="playBtn" class="animation-btn" type="button" aria-label="Play animation">
                            <span>▶</span> Play
                        </button>
                        <button id="pauseBtn" class="animation-btn" type="button" aria-label="Pause animation">
                            <span>⏸</span> Pause
                        </button>
                        <button id="stopBtn" class="animation-btn" type="button" aria-label="Stop animation">
                            <span>⏹</span> Stop
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- EXPORT SECTION (Optional future feature) -->
            <div class="collapsible-section" style="display: none;">
                <div class="section-header" id="exportHeader">
                    <h3>Export</h3>
                    <svg class="chevron" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true">
                        <path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                
                <div class="section-content" id="exportContent">
                    <button id="exportPngBtn" class="export-btn" type="button">
                        Download PNG
                    </button>
                    <button id="exportSvgBtn" class="export-btn" type="button">
                        Download SVG
                    </button>
                </div>
            </div>
        </div>
        
        <!-- CANVAS CONTAINER -->
        <div class="canvas-container">
            <div id="p5-container" role="img" aria-label="Generated ransom note display"></div>
            
            <!-- Loading indicator -->
            <div id="loadingIndicator" class="loading" style="display: none;">
                <span>Loading fonts...</span>
            </div>
        </div>
    </div>
    
    <!-- Error messages container -->
    <div id="errorContainer" style="display: none;" role="alert">
        <p id="errorMessage" class="error-message"></p>
    </div>
    
    <!-- Load our scripts -->
    <script src="fonts.js"></script>
    <script src="script.js"></script>
    
    <!-- Service Worker for offline capabilities (optional) -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(err) {
                        console.log('ServiceWorker registration failed');
                    });
            });
        }
    </script>
</body>
</html>
